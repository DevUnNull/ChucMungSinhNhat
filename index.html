<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sinh Nhật Vui Vẻ ♡</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Mali:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --pink-light: #ffebee;
            --pink-main: #ffc1e3;
            --pink-dark: #ff80ab;
            --red-heart: #ff1744;
            --text-dark: #d81b60;
            --font-main: 'Mali', cursive; 
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-main);
            background: var(--pink-light) url('https://png.pngtree.com/background/20220731/original/pngtree-cute-pink-kawaii-background-strawberry-picture-image_1912741.jpg') repeat;
            background-size: 400px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            /* Đảm bảo nội dung không tràn ra ngoài body */
            overflow-x: hidden; 
        }

        .container {
            width: 100%;
            max-width: 420px;
            /* ĐIỀU CHỈNH QUAN TRỌNG: Loại bỏ height: 100vh cố định */
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .screen {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 1s ease;
            text-align: center;
            padding: 20px;
            /* ĐIỀU CHỈNH CHO MOBILE: Cho phép cuộn nếu nội dung quá dài (chỉ nên xảy ra hiếm hoi) */
            max-height: 100vh; 
            overflow-y: auto; 
            -webkit-overflow-scrolling: touch;
        }

        .screen.active {
            opacity: 1;
            pointer-events: all;
        }

        /* Tối ưu hóa kích thước chữ cho màn hình nhỏ hơn */
        h1 {
            font-size: 2.5rem; /* Giảm từ 3rem */
            color: var(--red-heart);
            margin-bottom: 15px; /* Giảm margin */
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        p {
            font-size: 1.1rem; /* Giảm từ 1.2rem */
            color: var(--text-dark);
            line-height: 1.5;
            margin: 15px 0; /* Giảm margin */
        }

        img, video {
            max-width: 90%; /* Đảm bảo hình ảnh/video không vượt quá 90% chiều rộng màn hình */
            height: auto;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .envelope {
            cursor: pointer;
            max-width: 250px; /* Giảm kích thước phong bì */
        }

        .hint {
            margin-top: 30px; /* Giảm margin */
            font-size: 1.2rem; /* Giảm từ 1.3rem */
            color: var(--pink-dark);
        }

        .btn {
            margin-top: 25px; /* Giảm margin */
            padding: 12px 25px; /* Giảm padding */
            font-size: 1.2rem; /* Giảm từ 1.4rem */
            /* Các style khác giữ nguyên */
            background: var(--pink-main);
            border: 3px dashed var(--pink-dark);
            border-radius: 50px;
            color: var(--text-dark);
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .btn-heart {
            width: 100px; /* Giảm kích thước trái tim */
            height: 100px;
            /* Các style khác giữ nguyên */
            background: url('https://i.etsystatic.com/25364213/r/il/594e4b/5148949664/il_570xN.5148949664_kfr9.jpg') center/cover;
            border: none;
            border-radius: 50%;
            font-size: 1.1rem;
            color: white;
            text-shadow: 1px 1px 2px black;
        }

        .message-box {
            padding: 20px; /* Giảm padding */
            /* Các style khác giữ nguyên */
            background: rgba(255, 255, 255, 0.7);
            border: 4px dotted var(--pink-dark);
            border-radius: 20px;
            max-width: 90%;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .bow {
            width: 120px; /* Giảm kích thước nơ */
            margin-bottom: 15px;
        }

        .counter {
            gap: 10px; /* Giảm khoảng cách giữa các phần tử */
            margin: 20px 0;
            font-size: 1.3rem;
            flex-wrap: wrap;
        }

        .counter span {
            padding: 8px 15px;
            min-width: 80px;
        }
        
        /* Tối ưu hóa riêng cho màn hình nhỏ hơn 480px */
        @media (max-width: 480px) {
            h1 {
                font-size: 2.2rem;
            }
            p {
                font-size: 1.0rem;
            }
            .counter span {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <audio id="nhac-nen" src="nhac.mp3" autoplay loop muted></audio>

    <div class="container">
        <div id="screen-1" class="screen active">
            <img src="https://thumbs.dreamstime.com/b/heart-card-love-note-pink-romantic-message-cute-envelope-handmade-doodle-style-design-perfect-valentine-celebration-413266197.jpg" alt="Phong bì" class="envelope">
            <div class="hint">Nhấn vào phong bì đi nào ♡</div>
        </div>

        <div id="screen-2" class="screen">
            <h1>Sinh Nhật Vui Vẻ!</h1>
            <img src="https://media.tenor.com/KN1Hrg7D10UAAAAM/my-melody-sanrio.gif" alt="My Melody tặng quà">
            <button class="btn btn-heart">Nhấn trái tim ♡</button>
        </div>

        <div id="screen-3" class="screen">
            <img src="anh2.jpg" alt="Nơ hồng" class="bow">
            <div class="message-box">
                <p>Hôm nay sinh nhật em phải không? Chúc em tuổi mới thật nhiều niềm vui, luôn khỏe mạnh và gặp toàn điều tốt đẹp nhé!<br><br>
                Em hay mang năng lượng tích cực cho mọi người xung quanh lắm đó, hy vọng năm nay cậu sẽ còn tỏa sáng hơn nữa! ♡</p>
            </div>
            <button class="btn">Nhấn tiếp đi ♡</button>
        </div>

        <div id="screen-4" class="screen">
            <img src="https://media.tenor.com/pDBImHYGbgwAAAAM/my-melody-sanrio.gif" alt="My Melody dễ thương">
            <p style="font-size:1.6rem;margin:20px 0;">Đếm ngược đến ngày đặc biệt của em ♡</p>
            <div class="counter">
                <span id="days">0 Ngày</span> |
                <span id="hours">00 Giờ</span> |
                <span id="minutes">00 Phút</span> |
                <span id="seconds">00 Giây</span>
            </div>
            <button class="btn">Nhấn tiếp đi ♡</button>
        </div>

        <div id="screen-5" class="screen">
            <img src="anh.jpg" alt="Ảnh bé funny" class="photo" style="max-width:250px;">
                    <p style="max-width:90%;margin-top:20px;font-size:1.1rem;">Chúc mừng sinh nhật vị nha sĩ xinh đẹp!
Thật may mắn cho em, vì em có thể dùng sự khéo léo để tạo ra những nụ cười rạng rỡ cho mọi người. 
Còn anh, anh chỉ muốn dùng kinh nghiệm của một người làm Công an để đảm bảo "an ninh tuyệt đối" cho nụ cười rạng rỡ đó của riêng em thôi.
Chúc em tuổi mới luôn vui vẻ và thành công!♡</p>
                
            <button class="btn">Nhấn tiếp đi ♡</button>
        </div>

        <div id="screen-6" class="screen">
            <video id="final-video" src="video.mp4" playsinline controls></video>
            <p style="font-size:1.8rem;margin-top:20px;">Chúc sinh nhật em vui vẻ lần nữa nha ♡</p>
        </div>
    </div>

    <script>
        // Ngày sinh nhật: 16 tháng 12 năm 2025
        const targetDate = new Date('2025-12-16T00:00:00');

        // Lấy phần tử audio và video
        const audioPlayer = document.getElementById('nhac-nen');
        const finalVideo = document.getElementById('final-video');

        function switchScreen(current, next) {
            document.getElementById(current).classList.remove('active');
            document.getElementById(next).classList.add('active');
        }
        
        // --- CHỨC NĂNG BẬT TIẾNG & ĐẶT ÂM LƯỢNG (Dùng cho nhạc nền) ---
        function enableBackgroundAudio() {
            audioPlayer.volume = 1.0; 
            audioPlayer.muted = false; 
            audioPlayer.play().catch(e => console.log("Không thể phát nhạc nền sau tương tác:", e));

            // Gỡ bỏ sự kiện này sau khi đã thực hiện để tránh lặp lại
            document.getElementById('screen-1').removeEventListener('click', handleFirstInteraction);
        }

        // --- CHỨC NĂNG PHÁT VIDEO & TẮT NHẠC NỀN (Dùng cho màn hình 6) ---
        function playVideoAndStopBackground() {
            // 1. Tắt nhạc nền
            audioPlayer.pause();
            audioPlayer.currentTime = 0; // Đặt lại về đầu nếu cần

            // 2. Thiết lập và phát video
            finalVideo.volume = 1.0; // Volume max
            finalVideo.play().catch(e => console.log("Không thể phát video:", e));
        }

        function handleFirstInteraction() {
            enableBackgroundAudio();
            switchScreen('screen-1', 'screen-2');
        }
        
        // Gán sự kiện cho lần tương tác đầu tiên (Nhấn phong bì)
        document.getElementById('screen-1').addEventListener('click', handleFirstInteraction);
        
        // Các sự kiện chuyển màn hình
        document.querySelector('#screen-2 .btn-heart').addEventListener('click', () => switchScreen('screen-2', 'screen-3'));
        document.querySelector('#screen-3 .btn').addEventListener('click', () => switchScreen('screen-3', 'screen-4'));
        document.querySelector('#screen-4 .btn').addEventListener('click', () => switchScreen('screen-4', 'screen-5'));
        
        // Gán sự kiện chuyển từ màn 5 sang màn 6 VÀ kích hoạt chức năng video
        document.querySelector('#screen-5 .btn').addEventListener('click', () => {
            // Chuyển màn hình
            switchScreen('screen-5', 'screen-6');
            // Kích hoạt video
            playVideoAndStopBackground();
        });
        
        // Cập nhật countdown
        function updateCountdown() {
            const now = new Date();
            let diff = targetDate - now;

            if (diff < 0) diff = 0;

            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);

            document.getElementById('days').textContent = `${days} Ngày`;
            document.getElementById('hours').textContent = String(hours).padStart(2, '0') + ' Giờ';
            document.getElementById('minutes').textContent = String(minutes).padStart(2, '0') + ' Phút';
            document.getElementById('seconds').textContent = String(seconds).padStart(2, '0') + ' Giây';
        }

        updateCountdown();
        setInterval(updateCountdown, 1000);
    </script>
</body>
</html>